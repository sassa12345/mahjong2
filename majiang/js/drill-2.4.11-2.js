(()=>{"use strict";var a={9768:a=>{a.exports=JSON.parse('{"Mリーグルール":{"配給原点":25000,"順位点":["+30.0","+10.0","-10.0","-30.0"],"赤牌":{"m":1,"p":1,"s":1},"連風牌は2符":true,"クイタンあり":true,"喰い替え許可レベル":0,"場数":2,"途中流局あり":false,"流し満貫あり":false,"ノーテン宣言あり":true,"ノーテン罰あり":true,"最大同時和了数":1,"連荘方式":2,"トビ終了あり":false,"オーラス止めあり":false,"延長戦方式":0,"一発あり":true,"裏ドラあり":true,"カンドラあり":true,"カン裏あり":true,"カンドラ後乗せ":false,"ツモ番なしリーチあり":true,"リーチ後暗槓許可レベル":1,"ダブル役満あり":false,"役満の複合あり":true,"数え役満あり":false,"役満パオあり":true,"切り上げ満貫あり":true},"Classicルール":{"配給原点":30000,"順位点":["+12.0","+4.0","-4.0","-12.0"],"赤牌":{"m":0,"p":0,"s":0},"連風牌は2符":false,"クイタンあり":true,"喰い替え許可レベル":2,"場数":2,"途中流局あり":false,"流し満貫あり":false,"ノーテン宣言あり":false,"ノーテン罰あり":false,"最大同時和了数":1,"連荘方式":1,"トビ終了あり":false,"オーラス止めあり":false,"延長戦方式":0,"一発あり":false,"裏ドラあり":false,"カンドラあり":false,"カン裏あり":false,"カンドラ後乗せ":false,"ツモ番なしリーチあり":true,"リーチ後暗槓許可レベル":0,"ダブル役満あり":false,"役満の複合あり":false,"数え役満あり":false,"役満パオあり":false,"切り上げ満貫あり":false}}')}},e={};
/*!
 *  電脳麻将: 点数計算ドリル v2.4.11
 *
 *  Copyright(C) 2017 Satoshi Kobayashi
 *  Released under the MIT license
 *  https://github.com/kobalab/Majiang/blob/master/LICENSE
 */
const{hide:i,show:n,fadeIn:t,fadeOut:l}=Majiang.UI.Util,o=function i(n){var t=e[n];if(void 0!==t)return t.exports;var l=e[n]={exports:{}};return a[n](l,l.exports,i),l.exports}(9768),u={},s=["東","南","西","北"];let p,r,f,h;class g extends Majiang.AI{select_lizhi(a){return this.allow_lizhi(this.shoupai,a)&&Math.random()<.3}}function c(a){for(;;){let e=2*Math.random()|0,i=4*Math.random()|0,n=["","","",""],t=new Majiang.Shan(a._rule),l=[];for(let a=0;a<13;a++)l.push(t.zimo());n[i]=new Majiang.Shoupai(l).toString(),a.qipai({zhuangfeng:e,jushu:[0,3,2,1][i],changbang:0,lizhibang:0,defen:[25e3,25e3,25e3,25e3],baopai:t.baopai[0],shoupai:n}),a.shan.paishu=t.paishu+4;let o=null,u=0;for(;t.paishu;){let n;o?(n=t.gangzimo(),t._weikaigang&&t.kaigang(),o=null):n=t.zimo();let l={l:u,p:n};if(u==i){if(a.zimo(l),a.select_hule())return t.close(),{shoupai:a.shoupai,zhuangfeng:e,menfeng:i,baopai:t.baopai,fubaopai:a.shoupai.lizhi&&t.fubaopai};let n=a.select_gang();if(n){a.gang({l:i,m:n}),o=n;continue}a.dapai({l:i,p:a.select_dapai()})}else{if(a.zimo(l),a.dapai(l),a._neng_rong=!0,a.select_hule(l)){t.close();let l=n+["","+","=","-"][(4+u-i)%4];return{shoupai:a.shoupai,rongpai:l,zhuangfeng:e,menfeng:i,baopai:t.baopai,fubaopai:a.shoupai.lizhi&&t.fubaopai}}let s=a.select_fulou(l);if(s){if(a.fulou({l:i,m:s}),s.match(/^[mpsz]\d{4}/)){o=s;continue}a.dapai({l:i,p:a.select_dapai()})}}u=(u+1)%4}}}function m(a){let e=Majiang.Util.hule(a.shoupai,a.rongpai,Majiang.Util.hule_param({rule:p._rule,zhuangfeng:a.zhuangfeng,menfeng:a.menfeng,baopai:a.baopai,fubaopai:a.fubaopai,lizhi:a.shoupai.lizhi}));$(".zhuangfeng").text(s[a.zhuangfeng]),$(".menfeng").text(s[a.menfeng]),a.shoupai.lizhi?n($(".lizhi")):i($(".lizhi"));let t={baopai:a.baopai,fubaopai:a.fubaopai,paishu:0};a.fubaopai?n($(".shan.fubaopai")):i($(".shan.fubaopai")),u.baopai=new Majiang.UI.Shan($(".shan"),u.pai,t).redraw(!0);let l,o=a.shoupai.clone();a.rongpai&&o.zimo(a.rongpai),u.shoupai=new Majiang.UI.Shoupai($(".shoupai"),u.pai,o).redraw(!0),a.rongpai?$(".shoupai .zimo").prepend("<span>ロン</span>"):$(".shoupai .zimo").append("<span>ツモ</span>"),l=e&&e.defen?(a.rongpai?"ロン: ":"ツモ: ")+(a.rongpai?e.defen:a.menfeng?100*Math.ceil(e.defen/200)/2+" / "+100*Math.floor(e.defen/200):e.defen/3+"オール")+(e.damanguan?e.damanguan>1?` (役満 ×${e.damanguan})`:" (役満)":` (${e.fu}符 ${e.fanshu}翻)`):"(役なし)",$(".defen").text(l);let g="";e&&e.hupai&&(g=e.hupai.map((a=>a.name.match(/^(赤|裏)?ドラ$/)?`${a.name} ×${a.fanshu}`:a.name)).join(" / ")),$(".hupai").text(g),h.total++,i($(".answer")),n($(".button")),$(".answer button.miss").off("click").on("click",(()=>{f.push(a),d()})),n($(".exam")),i($(".break")),n($(".drill")),r=null,setTimeout((()=>{r=f.splice(5*Math.random(),1)[0]||c(p)}),10)}function d(){i($(".drill")),$(".stat").text(`回答数: ${h.total}、正答率: ${h.right/h.total*100|0}%`),h.total%10==0?(i($(".exam")),n($(".break")),n($(".drill"))):m(r||c(p))}function b(){i($(".drill")),$(".stat").text(""),r=null,f=[],p=function(){let a=new g,e=$('select[name="rule"]').val();return e=e?"-"==e?JSON.parse(localStorage.getItem("Majiang.rule")||"{}"):o[e]:{},e=Majiang.rule(e),a.kaiju({id:0,qijia:0,title:"",player:[],rule:e}),a}(),h={total:0,right:0},location.hash?m(function(a){let e,[i,n,t,l,o,u,s]=a.split("/"),p=Majiang.Shoupai.fromString(i);return"1"!=l&&p._zimo&&(e=p._zimo+"=",p.dapai(p._zimo)),"1"==s&&(p._lizhi=!0),n=n?n.split(","):[],t=t?t.split(","):p.lizhi?[]:null,o=+(o||0),u=+(u||0),{shoupai:p,rongpai:e,zhuangfeng:o,menfeng:u,baopai:n,fubaopai:t}}(location.hash.replace(/^#/,""))):m(c(p))}$((function(){u.pai=Majiang.UI.pai("#loaddata");for(let a of Object.keys(o))$('select[name="rule"]').append($("<option>").val(a).text(a));localStorage.getItem("Majiang.rule")&&$('select[name="rule"]').append($("<option>").val("-").text("カスタムルール").attr("selected",!0)),$('select[name="rule"]').on("change",b),$(".button button").on("click",(()=>{n($(".answer")),i($(".button"))})),$(".answer button.right").on("click",(()=>{h.right++,d()})),$(".break button").on("click",(()=>{m(r||c(p))})),b()}))})();